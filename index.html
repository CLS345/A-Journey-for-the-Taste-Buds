<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>美食展示页面</title>
</head>

<body>
    <!-- 访问时间记录模态框 -->
    <div id="visit-time-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>访问时间记录</h3>
            <ul id="visit-time-list"></ul>
        </div>
    </div>

    <!-- 注册登录模态框 -->
    <div id="register-login-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>用户登录</h2>
            <!-- 登录表单 -->
            <div id="login-form">
                <div class="form-group">
                    <label for="login-username">请输入用户名</label>
                    <input type="text" id="login-username" placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="login-password">请输入密码</label>
                    <input type="password" id="login-password" placeholder="请输入密码">
                </div>
                <div class="form-actions">
                    <button onclick="login()">立即登录</button>
                </div>
                <a href="#" class="register-link" onclick="showRegisterForm()">还没有账号?点此注册.</a>
            </div>
            <!-- 注册表单 -->
            <div id="register-form" style="display: none;">
                <h2>用户注册</h2>
                <div class="form-group">
                    <label for="register-username">请输入用户名</label>
                    <input type="text" id="register-username" placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="register-password">请输入密码</label>
                    <input type="password" id="register-password" placeholder="请输入密码">
                </div>
                <div class="form-actions">
                    <button onclick="register()">立即注册</button>
                </div>
                <a href="#" class="register-link" onclick="showLoginForm()">已有账号?点此登录.</a>
            </div>
            <!-- 登录成功提示 -->
            <div id="success-message" style="display: none;">
                <h2>登录成功！</h2>
                <p>欢迎，<span id="welcome-username"></span></p>
            </div>
        </div>
    </div>

    <div class="container" style="display: none;">
        <div class="logo-container">
            <div class="logo-wrapper">
                <img class="logo" src="images/logo.jpg" alt="Logo">
                <span class="logo-text">味蕾之旅</span>
            </div>
        </div>

        <!-- 计数器显示区域 -->
        <div class="counter-container">
            <p>本站访问量：<span id="visit-count">0</span> 次</p>
        </div>

        <!-- 导航栏 -->
        <nav class="nav">
            <ul>
                <li class="active"><a href="index.html">首页</a></li>
                <li><a href="https://fzero.fwh.is/link/index.php" target="_blank">友情链接</a></li>
                <li><a href="#" id="visit-time-link">访问时间记录</a></li>
                <li><a href="#" id="register-login-link">注册/登录</a></li>
            </ul>
        </nav>

        <div class="image-container">
            <div class="image-frame">
                <a href="roastsucklingpig.html">
                    <img src="images/recommended1.jpg" alt="烤乳猪">
                </a>
            </div>
            <div class="image-frame">
                <a href="blackgoat.html">
                    <img src="images/recommended2.jpg" alt="黑山羊火锅">
                </a>
            </div>
            <div class="image-frame">
                <a href="roastgoose.html">
                    <img src="images/recommended3.jpg" alt="烧鹅">
                </a>
            </div>
            <div class="image-frame">
                <a href="skewers.html">
                    <img src="images/recommended4.jpg" alt="串串香">
                </a>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 页面加载时检查用户是否已经登录
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const registerLoginModal = document.getElementById('register-login-modal');
            const mainContent = document.querySelector('.container');
            if (isLoggedIn === 'true') {
                // 用户已经登录，显示首页内容
                mainContent.style.display = "block";
                registerLoginModal.style.display = "none";
            } else {
                // 用户未登录，显示注册登录模态框
                registerLoginModal.style.display = "block";
                mainContent.style.display = "none";
            }
        });
    </script>
</body>

</html>